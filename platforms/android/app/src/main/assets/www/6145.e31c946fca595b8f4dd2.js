(self.webpackChunkSpatulalatest=self.webpackChunkSpatulalatest||[]).push([[6145],{6145:(e,t,i)=>{"use strict";i.r(t),i.d(t,{RecipeDataPageModule:()=>O});var o=i(1116),s=i(1462),n=i(8809),a=i(4174),c=i(4762),l=i(2693),r=i(7368),d=i(2661),p=i(9452),g=i(9624),u=i(6065),h=i(7696),f=i(5700),v=i(376);function _(e,t){1&e&&(r.TgZ(0,"div",15),r._UZ(1,"app-loading"),r.qZA())}function Z(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",22,23),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).playVideo()}),r._UZ(2,"img",24),r.qZA()}if(2&e){const e=r.oxw(2);r.Jzz("background: url(",null==e.recipe_data?null:e.recipe_data.image[0].image,");background-repeat: no-repeat;background-position: center;background-size: cover;")}}function m(e,t){if(1&e&&(r.TgZ(0,"div",16),r.TgZ(1,"div",17),r.YNc(2,Z,3,3,"div",18),r.TgZ(3,"video",19),r.TgZ(4,"div",20),r.TgZ(5,"div",21),r._uU(6,"\u062c\u0627\u0631 \u0627\u0644\u062a\u062d\u0645\u064a\u0644 ... "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(2),r.Q6J("ngIf",!e.movie.play),r.xp6(1),r.Q6J("hidden",!e.movie.play)("src",e.trustSrc(e.movie.src),r.LSH)}}function w(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"ion-button",26),r.NdJ("click",function(){return r.CHM(e),r.oxw(3).ask()}),r._UZ(1,"ion-icon",27),r._uU(2," \u062a\u062d\u0645\u064a\u0644 "),r.qZA()}}function y(e,t){if(1&e&&(r.TgZ(0,"ion-buttons"),r.YNc(1,w,3,0,"ion-button",25),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",!e.exist&&!e.startDownload)}}function x(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,y,2,1,"ion-buttons",9),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",!e.loading)}}function k(e,t){if(1&e&&(r.TgZ(0,"div",28),r.TgZ(1,"p"),r._uU(2),r.qZA(),r.TgZ(3,"p"),r._uU(4),r.qZA(),r.TgZ(5,"p"),r._uU(6),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(2),r.Oqu(null==e.recipe_data?null:e.recipe_data.title),r.xp6(2),r.Oqu(null==e.recipe_data?null:e.recipe_data.subtitle),r.xp6(2),r.AsE("\u0641\u064a\u062f\u064a\u0648 \u0645\u062f\u062a\u0647 ",null==e.recipe_data?null:e.recipe_data.duration," \u062f\u0642\u064a\u0642\u0629 \u0648 \u0645\u0633\u0627\u062d\u062a\u0647 ",null==e.recipe_data?null:e.recipe_data.video_size," \u0645\u064a\u062c\u0627\u0628\u0627\u064a\u062a")}}function T(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",36),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).divsOpen("div2")}),r.TgZ(1,"label"),r._uU(2,"\u062a\u062d\u0630\u064a\u0631\u0627\u062a \u0627\u062b\u0646\u0627\u0621 \u0627\u0639\u062f\u0627\u062f \u0647\u0630\u0647 \u0627\u0644\u0648\u0635\u0641\u0629"),r.qZA(),r._UZ(3,"p",31),r._UZ(4,"img",32),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(3),r.Q6J("innerHtml",null==e.recipe_data?null:e.recipe_data.warning,r.oJD)}}function A(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",37),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).divsOpen("div3")}),r.TgZ(1,"label"),r._uU(2,"\u0627\u0644\u0645\u0642\u0627\u062f\u064a\u0631 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u0629"),r.qZA(),r._UZ(3,"p",31),r._UZ(4,"img",32),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(3),r.Q6J("innerHtml",null==e.recipe_data?null:e.recipe_data.ingredient,r.oJD)}}function b(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",4),r.NdJ("click",function(){return r.CHM(e),r.oxw(4).openFullScreen()}),r.qZA()}if(2&e){const e=r.oxw().$implicit;r.Jzz("background: url('",e.image,"');background-repeat: no-repeat;background-position: center;background-size: cover;")}}function I(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,b,1,3,"div",40),r.qZA()),2&e){const e=t.$implicit;r.xp6(1),r.Q6J("ngIf",e.image)}}function J(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",38),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).divsOpen("div4")}),r.TgZ(1,"label"),r._uU(2,"\u0645\u0639\u0631\u0636 \u0627\u0644\u0635\u0648\u0631 "),r.qZA(),r.YNc(3,I,2,1,"div",39),r._UZ(4,"img",32),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(3),r.Q6J("ngForOf",null==e.recipe_data?null:e.recipe_data.image)}}function q(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",29),r.TgZ(1,"div",30),r.NdJ("click",function(){return r.CHM(e),r.oxw().divsOpen("div1")}),r.TgZ(2,"label"),r._uU(3,"\u0646\u0628\u0630\u0629 \u0639\u0646 \u0627\u0644\u0641\u064a\u062f\u064a\u0648 \u0648\u0627\u0644\u0645\u062d\u062a\u0648\u0649"),r.qZA(),r._UZ(4,"p",31),r._UZ(5,"img",32),r.qZA(),r.YNc(6,T,5,1,"div",33),r.YNc(7,A,5,1,"div",34),r.YNc(8,J,5,1,"div",35),r.qZA()}if(2&e){const e=r.oxw();r.xp6(4),r.Q6J("innerHtml",null==e.recipe_data?null:e.recipe_data.description,r.oJD),r.xp6(2),r.Q6J("ngIf",null==e.recipe_data?null:e.recipe_data.warning),r.xp6(1),r.Q6J("ngIf",null==e.recipe_data?null:e.recipe_data.ingredient),r.xp6(1),r.Q6J("ngIf",(null==e.recipe_data?null:e.recipe_data.image.length)>0)}}function U(e,t){if(1&e&&(r.TgZ(0,"div",52),r._UZ(1,"img",53),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.s9C("src",e.image,r.LSH)}}function N(e,t){if(1&e&&(r.TgZ(0,"div",50),r.YNc(1,U,2,1,"div",51),r.qZA()),2&e){const e=t.$implicit;r.xp6(1),r.Q6J("ngIf",e.image)}}function S(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",41),r.TgZ(1,"div",42),r.NdJ("click",function(){return r.CHM(e),r.oxw().closeFullScreen()}),r._UZ(2,"img",43),r.qZA(),r.TgZ(3,"div",44),r.TgZ(4,"div",45),r.YNc(5,N,2,1,"div",46),r.qZA(),r._UZ(6,"div",47),r._UZ(7,"div",48),r._UZ(8,"div",49),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(5),r.Q6J("ngForOf",null==e.recipe_data?null:e.recipe_data.image)}}const Y=[{path:"",component:(()=>{class e{constructor(e,t,i,o,s,n,a,c,l,r,d){this.shared=e,this.route=t,this.http=i,this.loadingController=o,this.toastController=s,this.alertCtrl=n,this.location=a,this.sanitizer=c,this.networkState=l,this.file=r,this.filetransfer=d,this.win=window,this.loading=!0,this.videos=[],this.exist=!1,this.startDownload=!1,this.downloadProgress=0,t.queryParams.subscribe(e=>{this.recipe_id=e.recipe_id,this.LoadRecipe()})}closeFullScreen(){}openFullScreen(){}ngOnInit(){}trustSrc(e,...t){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}doRefresh(e){this.LoadRecipe(e)}LoadRecipe(e){return(0,c.__awaiter)(this,void 0,void 0,function*(){if(this.movie={src:null,title:"",play:!1,load:!1},localStorage.getItem("videos")){this.recipes=JSON.parse(localStorage.getItem("videos"));for(var t=0;t<this.recipes.length;t++)if(this.recipes[t].id==this.recipe_id){this.recipe_data=this.recipes[t],yield this.readAsDataURL(this.recipe_data.video).then(e=>{console.log(e),this.recipe_data.video=e}),console.log(this.recipe_data);break}}if(!this.recipe_data&&localStorage.getItem("paidVideos"))for(this.recipes=JSON.parse(localStorage.getItem("paidVideos")),t=0;t<this.recipes.length;t++)if(this.recipes[t].id==this.recipe_id){this.recipe_data=this.recipes[t],console.log(this.recipe_data),yield this.readAsDataURL(this.recipe_data.video).then(e=>{this.recipe_data.video=e});break}if(this.recipe_data)return e&&setTimeout(()=>{console.log("Async operation has ended"),e.target.complete()},2e3),this.movie={src:this.recipe_data.video,title:this.recipe_data.title,play:!0,load:!0},this.exist=!0,void(this.loading=!1);new l.WM({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"});let i={api_token:this.shared.token,recipe_id:parseInt(this.recipe_id)};console.log(i),this.http.post(this.shared.base_url+"getRecipeData",i,{"Content-Type":"application/json"}).then(t=>{let i=JSON.parse(t.data);console.log(i),this.recipe_data=i,this.movie={src:this.recipe_data.video,title:this.recipe_data.title,play:!0,load:!0},this.loading=!1,e&&setTimeout(()=>{console.log("Async operation has ended"),e.target.complete()},2e3)},t=>(0,c.__awaiter)(this,void 0,void 0,function*(){this.shared.showErroAlert(),this.loading=!1,e&&setTimeout(()=>{console.log("Async operation has ended"),e.target.complete()},2e3)}))})}goBack(){this.location.back()}readAsDataURL(e){return new Promise((t,i)=>{this.file.readAsDataURL(this.file.dataDirectory+"spatula/",e).then(e=>{t(e)}).catch(e=>{i(e)})})}playVideo(){this.exist||this.ask(),console.log(this.recipe_data);var e=document.getElementById("video_1");console.log(e),e.style.display="block",this.movie={src:this.recipe_data.video,title:this.recipe_data.title,play:!0,load:!0},e=document.getElementById("video_1");var t=document.getElementById("placeholder_1");t.style.top=e.offsetTop+"px",t.style.left=e.offsetLeft+"px",e.onwaiting=function(){var e;(e=t).style.height=this.scrollHeight+"px",e.style.width=this.scrollWidth+"px",e.style.display="block"},e.onplaying=function(){t.style.display="none"},console.log(this.movie),document.getElementById("playbutton").style.display="none"}ask(){return(0,c.__awaiter)(this,void 0,void 0,function*(){const e=yield this.alertCtrl.create({header:"\u0633\u0628\u0627\u062a\u0648\u0644\u0627",message:"\u0647\u0644 \u062a\u0631\u064a\u062f \u062a\u062d\u0645\u064a\u0644 \u0647\u0630\u0627 \u0627\u0644\u0641\u064a\u062f\u064a\u0648\u061f",cssClass:"vtc-popup",buttons:[{text:"\u0627\u0644\u063a\u0627\u0621",role:"Cancel",handler:e=>{}},{text:"\u0645\u0648\u0627\u0641\u0642",handler:e=>(0,c.__awaiter)(this,void 0,void 0,function*(){if("none"!=this.networkState.type){console.log("Download Started ... ");let t=yield this.loadingController.create({cssClass:"loading-msg",message:"\u0628\u0631\u062c\u0627\u0621 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"});const i=yield this.toastController.create({cssClass:"toast-msg",message:"\u062c\u0627\u0631\u0649 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0641\u064a\u062f\u064a\u0648",animated:!0,color:"dark",buttons:[{text:"\u0625\u062e\u0641\u0627\u0621",cssClass:"toast-hide-btn",handler:()=>{i.dismiss()}}]});yield t.present(),this.startDownload=!0,console.log(this.recipe_data);var e=encodeURI(this.recipe_data.video);const o=this.filetransfer.create();let s=(new Date).getTime()+".mp4";t.dismiss(),i.present(),o.download(e,this.file.dataDirectory+"/spatula/"+s,!0).then(e=>{let t;this.videos="paid"==this.recipe_data.type?localStorage.getItem("paidVideos")?JSON.parse(localStorage.getItem("padiVideos")):[]:localStorage.getItem("videos")?JSON.parse(localStorage.getItem("videos")):[],this.recipe_data.video=s,this.recipe_data.id=this.recipe_id;for(var o=0;o<this.videos.length;o++)this.videos[o].id==this.recipe_data.id&&(t=o);t?this.videos[t]=this.recipe_data:this.videos.push(this.recipe_data),"paid"==this.recipe_data.type?localStorage.setItem("paidVideos",JSON.stringify(this.videos)):localStorage.setItem("videos",JSON.stringify(this.videos)),this.startDownload=!1,this.exist=!0,i.dismiss(),this.presentToast("\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0641\u064a\u062f\u064a\u0648 \u0628\u0646\u062c\u0627\u062d","success")},e=>{console.log(e),this.shared.showErroToast("\u062a\u0639\u0630\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0641\u064a\u062f\u064a\u0648")}),o.onProgress(e=>{let t=Math.floor(e.loaded/e.total*100);i.message="\u062a\u0645 \u062a\u062d\u0645\u064a\u0644 "+t.toString()+"%"})}else this.shared.showErroAlert()})}]});yield e.present()})}presentToast(e,t){return(0,c.__awaiter)(this,void 0,void 0,function*(){(yield this.toastController.create({cssClass:"toast-msg",message:e,color:t||"dark",duration:3e3})).present()})}divsOpen(e){document.getElementById(e).classList.contains("opened")?document.getElementById(e).classList.remove("opened"):document.getElementById(e).classList.add("opened")}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(d.F),r.Y36(a.gz),r.Y36(p.t),r.Y36(n.HT),r.Y36(n.yF),r.Y36(n.Br),r.Y36(o.Ye),r.Y36(g.H7),r.Y36(u.Z),r.Y36(h.$),r.Y36(f.K))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-recipe-data"]],decls:23,vars:6,consts:[[1,"spatula-header"],["slot","start"],[2,"direction","rtl"],["slot","end"],[3,"click"],["src","assets/img/backButton.svg","slot","icon-only",2,"font-size","16px"],["slot","fixed","pullFactor","0.5","pullMin","100","pullMax","200",3,"ionRefresh"],["class","loading",4,"ngIf"],["class","body-holder","style","height:250px",4,"ngIf"],[4,"ngIf"],["class","video-title",4,"ngIf"],["class","video-body",4,"ngIf"],["class","preview-gallery",4,"ngIf"],[1,"help",3,"click"],["src","assets/img/whatsapp.png"],[1,"loading"],[1,"body-holder",2,"height","250px"],[1,"section-1",2,"height","100%"],["class","play-button",3,"style","click",4,"ngIf"],["id","video_1","autoplay","","controls","","preload","auto","poster","assets/img/logo.png","data-setup","{}",1,"vjs-tech",2,"width","100%","height","220px",3,"hidden","src"],["id","placeholder_1",1,"placeholder"],[1,"loader"],[1,"play-button",3,"click"],["playbutton",""],["src","assets/img/play.png"],["style","    color: #fc96ab;",3,"click",4,"ngIf"],[2,"color","#fc96ab",3,"click"],["name","download","slot","start"],[1,"video-title"],[1,"video-body"],["id","div1",3,"click"],[3,"innerHtml"],["src","assets/img/angle-arrow-down.svg"],["id","div2",3,"click",4,"ngIf"],["id","div3",3,"click",4,"ngIf"],["id","div4",3,"click",4,"ngIf"],["id","div2",3,"click"],["id","div3",3,"click"],["id","div4",3,"click"],[4,"ngFor","ngForOf"],[3,"style","click",4,"ngIf"],[1,"preview-gallery"],[1,"close-button",3,"click"],["src","assets/img/close.svg"],[1,"swiper-container"],[1,"swiper-wrapper"],["class","swiper-slide",4,"ngFor","ngForOf"],[1,"swiper-pagination","swiper-pagination-white"],[1,"swiper-button-prev"],[1,"swiper-button-next"],[1,"swiper-slide"],["class","swiper-zoom-container",4,"ngIf"],[1,"swiper-zoom-container"],[3,"src"]],template:function(e,t){1&e&&(r.TgZ(0,"ion-header",0),r.TgZ(1,"ion-toolbar"),r.TgZ(2,"ion-buttons",1),r._UZ(3,"ion-menu-button"),r.qZA(),r.TgZ(4,"ion-title"),r.TgZ(5,"p",2),r._uU(6,"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062a\u062d\u0636\u064a\u0631 \u0627\u0644\u0631\u0627\u0626\u0639\u0629!"),r.qZA(),r.qZA(),r.TgZ(7,"ion-buttons",3),r.TgZ(8,"ion-button",4),r.NdJ("click",function(){return t.goBack()}),r._UZ(9,"ion-icon",5),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(10,"ion-content"),r.TgZ(11,"ion-refresher",6),r.NdJ("ionRefresh",function(e){return t.doRefresh(e)}),r._UZ(12,"ion-refresher-content"),r.qZA(),r.YNc(13,_,2,0,"div",7),r.YNc(14,m,7,3,"div",8),r.YNc(15,x,2,1,"div",9),r.YNc(16,k,7,4,"div",10),r.YNc(17,q,9,4,"div",11),r.YNc(18,S,9,1,"div",12),r.qZA(),r.TgZ(19,"div",13),r.NdJ("click",function(){return t.shared.openLink("whats")}),r._UZ(20,"img",14),r.TgZ(21,"p"),r._uU(22,"\u0644\u0644\u0645\u0633\u0627\u0639\u062f\u0629. \u0627\u0636\u063a\u0637\u064a \u0647\u0646\u0627 \u0644\u0644\u062a\u0648\u0627\u0635\u0644 \u0639\u0628\u0631 \u0627\u0644\u0648\u0627\u062a\u0633\u0627\u0628."),r.qZA(),r.qZA()),2&e&&(r.xp6(13),r.Q6J("ngIf",t.loading),r.xp6(1),r.Q6J("ngIf",!t.loading&&t.recipe_data),r.xp6(1),r.Q6J("ngIf",!t.loading),r.xp6(1),r.Q6J("ngIf",t.recipe_data&&t.movie.load),r.xp6(1),r.Q6J("ngIf",!t.loading&&t.recipe_data),r.xp6(1),r.Q6J("ngIf",!t.loading&&t.recipe_data))},directives:[n.Gu,n.sr,n.Sm,n.fG,n.wd,n.YG,n.gu,n.W2,n.nJ,n.Wo,o.O5,v.N,o.sg],styles:[".download[_ngcontent-%COMP%]{--ion-color-base:#fc96ab!important}"]}),e})()}];let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[a.Bz.forChild(Y)],a.Bz]}),e})();var F=i(957);let O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[o.ez,s.u5,n.Pc,C,F.K]]}),e})()}}]);