(self.webpackChunkSpatulalatest=self.webpackChunkSpatulalatest||[]).push([[8274],{8274:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PurchasePageModule:()=>Z});var o=n(1116),s=n(1462),r=n(8809),i=n(4174),a=n(4762),c=n(2693),u=n(7368),h=n(2661),p=n(9452);function l(e,t){1&e&&(u.TgZ(0,"p"),u._uU(1,"\u064a\u0631\u062c\u0649 \u0627\u062f\u062e\u0627\u0644 \u0631\u0642\u0645 \u0627\u0644\u0646\u0642\u0627\u0644 10 \u0627\u0631\u0642\u0627\u0645 \u062a\u0628\u062f\u0623 \u0628\u0640 09 "),u.qZA())}const d=[{path:"",component:(()=>{class e{constructor(e,t,n,o){this.shared=e,this.location=t,this.http=n,this.alertCtrl=o,this.phoneNumber="",this.purchase={},this.course=this.shared.selectedCourse}goBack(){this.location.back()}ngOnInit(){}InitializeTPayPaymentFunc(e){console.log(this.phoneNumber),new c.WM({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"});let t={api_token:this.shared.token,course_id:parseInt(this.course.id),phone:this.phoneNumber};return console.log(t),this.http.post(this.shared.base_url+"initializeTPayPayment",t,{"Content-Type":"application/json"})}purchaseVideo(){10==this.phoneNumber.length&&this.phoneNumber.startsWith("09")?this.InitializeTPayPaymentFunc().then(e=>(0,a.__awaiter)(this,void 0,void 0,function*(){console.log(e);let t=JSON.parse(e.data);t.errorMessage&&null!=t.errorMessage&&""!=t.errorMessage&&51==t.operationStatusCode&&this.shared.showErroToast("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u062f\u062e\u0644 \u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0635\u062d\u064a\u062d"),t.transactionId&&(this.purchase.transactionId=t.transactionId),this.purchase.transactionId?this.verificationCode=yield this.alertCtrl.create({header:"\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u0634\u0631\u0627\u0621",message:"<p> \u0627\u062f\u062e\u0644 \u0631\u0645\u0632 \u062a\u0627\u0643\u064a\u062f \u0627\u0644\u0634\u0631\u0627\u0621 \u0627\u0644\u0645\u0631\u0633\u0644 \u0627\u0644\u0649 \u0627\u0644\u0631\u0642\u0645 "+this.phoneNumber+' \u0645\u0643\u0648\u0646 \u0645\u0646 \u0666 \u0627\u0631\u0642\u0627\u0645 </p><input placeholder="\u0627\u062f\u062e\u0644 \u0627\u0644\u0643\u0648\u062f \u0627\u0644\u0645\u0631\u0633\u0644 \u0627\u0644\u064a\u0643 \u0648\u0627\u0644\u0645\u0643\u0648\u0646 \u0645\u0646 \u0666 \u0627\u0631\u0642\u0627\u0645" id="purchaseCode" /><p id="errorCode"></p>',cssClass:"vtc-popup",buttons:[{text:"<b>\u062a\u063a\u064a\u064a\u0631 \u0627\u0644\u0631\u0642\u0645</b>",handler:function(e){}},{text:"<b>\u0627\u0643\u0645\u0627\u0644 \u0627\u0644\u0634\u0631\u0627\u0621</b>",handler:e=>{e.preventDefault(),document.getElementById("purchaseCode").getAttribute("value")?this.FinishPaymentFunc().then(e=>{let t=JSON.parse(e.data);0==t.operationStatusCode&&(this.verificationCode.close(),this.alertCtrl.create({header:"\u0633\u0628\u0627\u062a\u0648\u0644\u0627",message:"\u062a\u0645\u062a \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0634\u0631\u0627\u0621 \u0628\u0646\u062c\u0627\u062d",cssClass:"vtc-popup",buttons:[{text:"<b>\u0645\u0648\u0627\u0641\u0642</b>",handler:e=>{this.goBack()}}]})),document.querySelector("#errorCode").innerHTML=4==t.operationStatusCode?"\u0644\u0627 \u064a\u0648\u062c\u062f \u0631\u0635\u064a\u062f \u0643\u0627\u0641\u064a \u0644\u0625\u062a\u0645\u0627\u0645 \u0627\u0644\u0634\u0631\u0627\u0621":"\u0631\u062c\u0627\u0621 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0627\u0644\u0643\u0648\u062f \u0627\u0644\u0645\u062f\u062e\u0644 \u0648\u0627\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629"}):document.getElementById("errorCode").innerHTML="\u0631\u062c\u0627\u0621 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0627\u0644\u0643\u0648\u062f \u0627\u0644\u0645\u062f\u062e\u0644 \u0648\u0627\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629"}}]}):this.alertCtrl.create({header:"\u0633\u0628\u0627\u062a\u0648\u0644\u0627",message:"\u0647\u0646\u0627\u0643 \u062e\u0637\u0623 \u062a\u0642\u0646\u064a, \u0631\u062c\u0627\u0621 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0644\u0627\u062d\u0642\u0627\u064b",cssClass:"vtc-popup",buttons:[{text:"<b>\u0645\u0648\u0627\u0641\u0642</b>",handler:function(e){}}]})}),e=>(0,a.__awaiter)(this,void 0,void 0,function*(){console.log(e),this.shared.showErroAlert()})):this.check=!0}FinishPaymentFunc(){new c.WM({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"});let e={api_token:this.shared.token,course_id:parseInt(this.course.course_id),pinCode:document.getElementById("purchaseCode").getAttribute("value"),transactionId:this.purchase.transactionId};return console.log(e),this.http.post(this.shared.base_url+"confirmTPayPayment",e,{"Content-Type":"application/json"})}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(h.F),u.Y36(o.Ye),u.Y36(p.t),u.Y36(r.Br))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-purchase"]],decls:35,vars:4,consts:[[1,"spatula-header"],["slot","start"],[2,"direction","rtl"],["slot","end"],[3,"click"],["src","assets/img/backButton.svg","slot","icon-only",2,"font-size","16px"],[1,"purchase"],[1,"purchase-image"],[1,"purchase-phone"],["maxlength","10","placeholder","\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0631\u0642\u0645 \u0627\u0644\u0646\u0642\u0627\u0644 09xxxxxxxx","type","tel",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"help",3,"click"],["src","assets/img/whatsapp.png"]],template:function(e,t){1&e&&(u.TgZ(0,"ion-header",0),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-buttons",1),u._UZ(3,"ion-menu-button"),u.qZA(),u.TgZ(4,"ion-title"),u.TgZ(5,"p",2),u._uU(6,"\u0639\u0645\u0644\u064a\u0629 \u0634\u0631\u0627\u0621"),u.qZA(),u.qZA(),u.TgZ(7,"ion-buttons",3),u.TgZ(8,"ion-button",4),u.NdJ("click",function(){return t.goBack()}),u._UZ(9,"ion-icon",5),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(10,"ion-content"),u.TgZ(11,"div",6),u._UZ(12,"div",7),u.TgZ(13,"ul"),u.TgZ(14,"li"),u.TgZ(15,"label"),u._uU(16,"\u062d\u0648\u0644 \u0627\u0644\u0639\u0645\u0644\u064a\u0629"),u.qZA(),u.TgZ(17,"p"),u._uU(18),u.qZA(),u.qZA(),u.TgZ(19,"li"),u.TgZ(20,"label"),u._uU(21,"\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0628\u0644\u063a"),u.qZA(),u.TgZ(22,"p"),u._uU(23),u.qZA(),u.qZA(),u.qZA(),u.TgZ(24,"div",8),u.TgZ(25,"label"),u._uU(26,"* \u0631\u0642\u0645 \u0627\u0644\u0646\u0642\u0627\u0644 "),u.qZA(),u.TgZ(27,"ion-input",9),u.NdJ("ngModelChange",function(e){return t.phoneNumber=e}),u.qZA(),u.YNc(28,l,2,0,"p",10),u.TgZ(29,"button",4),u.NdJ("click",function(){return t.purchaseVideo()}),u._uU(30,"\u0634\u0631\u0627\u0621"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(31,"div",11),u.NdJ("click",function(){return t.shared.openLink("whats")}),u._UZ(32,"img",12),u.TgZ(33,"p"),u._uU(34,"\u0644\u0644\u0645\u0633\u0627\u0639\u062f\u0629. \u0627\u0636\u063a\u0637\u064a \u0647\u0646\u0627 \u0644\u0644\u062a\u0648\u0627\u0635\u0644 \u0639\u0628\u0631 \u0627\u0644\u0648\u0627\u062a\u0633\u0627\u0628."),u.qZA(),u.qZA()),2&e&&(u.xp6(18),u.Oqu(t.course.name),u.xp6(5),u.hij(" ",t.course.price," \u062f\u064a\u0646\u0627\u0631 \u0644\u064a\u0628\u064a"),u.xp6(4),u.Q6J("ngModel",t.phoneNumber),u.xp6(1),u.Q6J("ngIf",(10!=t.phoneNumber.length||!t.phoneNumber.startsWith("09"))&&t.check))},directives:[r.Gu,r.sr,r.Sm,r.fG,r.wd,r.YG,r.gu,r.W2,r.pK,r.j9,s.nD,s.JJ,s.On,o.O5],styles:[""]}),e})()}];let g=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[i.Bz.forChild(d)],i.Bz]}),e})(),Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[o.ez,s.u5,r.Pc,g]]}),e})()}}]);