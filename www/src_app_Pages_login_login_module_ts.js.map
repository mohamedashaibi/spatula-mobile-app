{"version":3,"sources":["./src/app/Pages/login/login-routing.module.ts","./src/app/Pages/login/login.module.ts","./src/app/Pages/login/login.page.ts","./src/app/Pages/login/login.page.scss","./src/app/Pages/login/login.page.html"],"names":[],"mappings":"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","file":"src_app_Pages_login_login_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\nimport { Facebook } from '@ionic-native/facebook/ngx';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule\n  ],\n  declarations: [LoginPage],\n  providers: [\n    Facebook,\n    \n  ]\n})\nexport class LoginPageModule { }\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Facebook } from '@ionic-native/facebook/ngx';\nimport { SharedService } from 'src/app/Services/shared.service';\nimport { TwitterConnect } from '@ionic-native/twitter-connect/ngx';\nimport { MenuController, Platform } from '@ionic/angular';\nimport { HTTP } from '@ionic-native/http/ngx';\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  user = {\n    name: \"\",\n    email: \"\",\n    social_id: \"\",\n    social_type: \"\"\n  }\n  constructor(public fb: Facebook, public shared: SharedService, public router: Router,\n    public menuCtrl: MenuController,\n    public http: HttpClient, public twitter: TwitterConnect, public plt: Platform, public natHttp: HTTP) { }\n\n  ngOnInit() {\n  }\n\n  faceLogin() {\n    this.fb.login([\"email\", \"public_profile\"]).then(res => {\n\n      console.error(res)\n      if (!res.authResponse) {\n        console.error(\"Cannot find the authResponse\");\n        return;\n      }\n      this.fb.api('/me?fields=email,name,picture.width(720).as(picure_large)&access_token=' + res.authResponse.accessToken, null).then(async profileInfo => {\n        this.user.name = profileInfo.name;\n        this.user.email = profileInfo.email;\n        this.user.social_id = profileInfo.id;\n        this.user[\"profilePic\"] = profileInfo.picure_large.data.url;\n        this.user.social_type = \"facebook\";\n        console.log(\"This is before the Login function \" + this.user, profileInfo);\n        await this.shared.presentLoading();\n        this.Login(this.user).then(resp => {\n          let res = JSON.parse(resp.data)\n          console.log(\"This is the res in login = \" + res)\n          // this.user[\"profilePic\"] = resp[\"profile_image_url\"];\n          this.user[\"api_token\"] = res[\"api_token\"];\n          this.user[\"created_at\"] = res[\"created_at\"];\n          localStorage.setItem('spatulaUser', JSON.stringify(this.user));\n          this.shared.loadUser();\n          this.shared.hide();\n          this.menuCtrl.enable(true);\n          this.router.navigate(['/home']);\n        }, async err => {\n          this.shared.hide();\n          console.log(err)\n          this.shared.showErroToast(\"حدث خطأ ما برجاء المحاولة لاحقا\");\n        });\n      })\n    }).catch(res => {\n      console.error(\"Error is rubbish\");\n      console.error('Error in fb' + JSON.stringify(res));\n      this.shared.showErroToast(\"حدث خطأ ما برجاء المحاولة لاحقا\");\n    })\n  }\n\n  insta() {\n    this.router.navigate([\"/home\"])\n  }\n  twitterLogin() {\n    this.twitter.login().then(res => {\n      console.log(res)\n      this.shared.TwitterAuth(res).then(async (result) => {\n        console.log(result.additionalUserInfo.profile);\n        this.user.name = result.additionalUserInfo.profile[\"name\"];\n        this.user.social_id = result.additionalUserInfo.profile[\"id\"];\n        this.user.social_type = \"twitter\";\n        this.user.email = result.additionalUserInfo.profile[\"email\"];\n        this.user[\"profilePic\"] = result.additionalUserInfo.profile[\"profile_image_url_https\"];\n        await this.shared.presentLoading();\n        console.log(\"okookoook\")\n        this.Login(this.user).then(resp => {\n          let res = JSON.parse(resp.data)\n          console.log(res)\n          // this.user[\"profilePic\"] = resp[\"profile_image_url\"];\n          this.user[\"api_token\"] = res[\"api_token\"];\n          this.user[\"created_at\"] = res[\"created_at\"];\n          localStorage.setItem('spatulaUser', JSON.stringify(this.user));\n          this.shared.loadUser();\n          this.shared.hide();\n          this.menuCtrl.enable(true);\n          this.router.navigate(['/home']);\n        }, err => {\n          this.shared.hide();\n          console.log(err);\n          this.shared.showErroToast(\"حدث خطأ ما برجاء المحاولة لاحقا\");\n        });\n        console.log('You have been successfully logged in!')\n      }).catch((error) => {\n        console.log(error)\n        this.shared.showErroToast(\"حدث خطأ ما برجاء المحاولة لاحقا\");\n      })\n\n    }, err => {\n      console.log(err)\n    })\n  }\n\n  Login(user) {\n    let headers = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\n      }),\n      // };\n    }\n    let params = {\n      name: user.name,\n      email: user.email,\n      social_id: user.social_id,\n      social_type: user.social_type\n    }\n\n\n    const nativeHeaders = {\n      'Content-Type': 'application/json',\n    };\n\n    // if (!this.plt.is(\"cordova\")) {\n    //   return this.http.post(this.shared.base_url + \"login\", params, headers);\n    // } else {\n    return this.natHttp.post(this.shared.base_url + \"login\", params, nativeHeaders)\n    // }\n\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsb2dpbi5wYWdlLnNjc3MifQ== */\";","export default \"<div class=\\\"login-view\\\">\\n  <div>\\n    <img class=\\\"info-img\\\" src=\\\"assets/img/info.png\\\">\\n\\n    <p>لتتمكن من الدخول او انشاء حساب جديد على سباتولا الرجاء التسجيل بواسطة اي من الحسابات التالية الخاصة بك </p>\\n    <div class=\\\"social-icons\\\">\\n      <div (click)=\\\"twitterLogin()\\\"><img src=\\\"assets/img/twitter.png\\\" /></div>\\n      <!-- <div (click)=\\\"insta()\\\"><img src=\\\"assets/img/insta.png\\\" /></div> -->\\n      <div (click)=\\\"faceLogin()\\\"><img src=\\\"assets/img/facebook.png\\\" /></div>\\n    </div>\\n  </div>\\n\\n</div>\\n<div class=\\\"help\\\" (click)=\\\"shared.openLink('whats')\\\">\\n  <img src=\\\"assets/img/whatsapp.png\\\" />\\n  <p>للمساعدة. اضغطي هنا للتواصل عبر الواتساب.</p>\\n</div>\";"],"sourceRoot":"webpack:///"}